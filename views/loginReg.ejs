<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Login</title>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
</head>

<body>
   <h1>Log in</h1>
        <div>
            <span>ID: </span><br>
            <input type="text" name="user">
        </div>

        <div>
            <span>Password:</span><br>
            <input type="password" name="pwd"></div>
        <div>
            <br><br>
            <input type="submit" value="ログイン" id="btn">
            <a href="/register"><button>新規登録</button></a>
            
            
            <span class="spa1"></span>
            
            
        </div>
    
</body>

</html>
<script>
//-----------------------AJAX for login----------------------------------
$(function(){
     $('#btn').click(function(){
         var user=$('input[type=text]')
         var pwd=$('input[type=password]')
         var logindata={user:user.val(),pwd:pwd.val()}
         if(user.val().length==0||pwd.val().length==0){
            $('.spa1').text('Id or password CANNOT be empty');
         }else{
             $.ajax({ //POST
                 type:'post',
                 url:'/login',
                 dataType:'json',
                 data:logindata,
                 success:function(data){
                     if(data.code>0){ //ログイン成功
                        window.location.href='/';
                         // alert("Login Succeed！");
                        // $('.spa1').text(data.msg)
                     }else{
                        $('.spa1').text(data.msg);
                        alert("IDかパスワードが間違っています！"); }
                 },
                 error:function(error){
                     console.log(error)
                 }
             })
         }
     })

 })
</script>